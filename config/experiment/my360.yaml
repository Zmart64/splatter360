# @package _global_

defaults:
  - override /dataset: my360
  - override /model/encoder: costvolume
  - override /loss: [mse, lpips]

wandb:
  name: my360
  tags: [my360, 512x1024]

data_loader:
  train:
    batch_size: 1

trainer:
  max_steps: 5000
  check_val_every_n_epoch: 0

model:
  encoder:
    num_depth_candidates: 64
    costvolume_unet_feat_dim: 128
    costvolume_unet_channel_mult: [1, 1, 1]
    costvolume_unet_attn_res: [4]
    gaussians_per_pixel: 1
    depth_unet_feat_dim: 32
    depth_unet_attn_res: [16]
    depth_unet_channel_mult: [1, 1, 1, 1]
    wo_backbone_cross_attn: false
    use_cross_view_self_attn: true

loss:
  lpips:
    apply_after_step: 0
    weight: 0.05

dataset:
  image_shape: [512, 1024]
  roots: [/srv/store/docker-users/thesis/marten1/data/my360_dataset_pt]
  rgb_roots: [/srv/store/docker-users/thesis/marten1/data/my360_dataset]
  near: 0.1
  far: 10.0
  baseline_scale_bounds: false
  make_baseline_1: false
  test_times_per_scene: 1
  shuffle_val: false

test:
  compute_scores: false
